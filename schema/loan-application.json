{
    "description": "",
    "private": false,
    "inputs": {
        "url": {
            "typeRef": "#/domains/Generic/types/URL",
            "description": "Website entry point.",
            "initial": true
        },
        "account": {
            "typeRef": "#/domains/Generic/types/Account"
        },
        "loan": {
            "typeRef": "#/domains/LoanApplication/types/Loan"
        },
        "existingApplication": {
            "typeRef": "#/domains/LoanApplication/types/OptionalExistingApplication"
        },
        "applicant": {
            "typeRef": "#/domains/LoanApplication/types/Applicant"
        },
        "loanConsent": {
            "typeRef": "#/domains/LoanApplication/types/Quote",
            "description": "Client's consent for the loan, should exactly match the <code>quote</code> object from output.<br/>Automation will not proceed with the loan application until the consent is provided.",
            "sourceOutputKey": "quote",
            "inputMethod": "Consent"
        },
        "employment": {
            "typeRef": "#/domains/LoanApplication/types/Employment"
        },
        "guarantor": {
            "typeRef": "#/domains/LoanApplication/types/Applicant"
        },
        "directDebit": {
            "typeRef": "#/domains/LoanApplication/types/DirectDebitPayment"
        },
        "mobilePinConfirmation": {
            "typeRef": "#/domains/LoanApplication/types/MobilePinConfirmation"
        },
        "mobilePinConfirmationRetry1": {
            "typeRef": "#/domains/LoanApplication/types/MobilePinConfirmation"
        },
        "mobilePinConfirmationRetry2": {
            "typeRef": "#/domains/LoanApplication/types/MobilePinConfirmation"
        },
        "emailVerification": {
            "typeRef": "#/domains/LoanApplication/types/EmailVerification"
        },
        "proofOfIncome": {
            "typeRef": "#/domains/LoanApplication/types/Files"
        },
        "proofOfId": {
            "typeRef": "#/domains/Generic/types/File"
        },
        "proofOfAddress": {
            "typeRef": "#/domains/Generic/types/File"
        },
        "expenses": {
            "typeRef": "#/domains/LoanApplication/types/Expenses"
        },
        "payment": {
            "typeRef": "#/domains/Generic/types/Payment"
        },
        "panToken": {
            "typeRef": "#/domains/Generic/types/PanToken"
        },
        "options": {
            "typeRef": "#/domains/LoanApplication/types/Options",
            "default": {},
            "initial": true
        }
    },
    "outputs": {
        "quote": {
            "typeRef": "#/domains/LoanApplication/types/Quote"
        },
        "documents": {
            "typeRef": "#/domains/LoanApplication/types/Documents"
        },
        "requirements": {
            "typeRef": "#/domains/LoanApplication/types/Requirements"
        },
        "confirmation": {
            "typeRef": "#/domains/LoanApplication/types/Confirmation"
        },
        "expenseTypes": {
            "typeRef": "#/domains/LoanApplication/types/ExpenseTypes"
        },
        "savedUrl": {
            "typeRef": "#/domains/LoanApplication/types/SavedUrl"
        }
    },
    "types": {
        "SavedUrl": {
            "type": "object",
            "$ref": "#/domains/Generic/types/Link"
        },
        "Loan": {
            "type": "object",
            "description": "Loan criteria",
            "properties": {
                "purpose": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Purpose of the loan.",
                    "example": "buy a car"
                },
                "amount": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "The loan amount required."
                },
                "repaymentMonths": {
                    "type": "number",
                    "description": "The number of months to repay the loan.",
                    "example": 48
                },
                "existingLoan": {
                    "type": "boolean",
                    "description": "Existing loan with this provider."
                },
                "promotionCode": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Promotion code."
                }
            },
            "additionalProperties": false,
            "required": [
                "purpose", "amount", "repaymentMonths"
            ]
        },
        "OptionalExistingApplication": {
            "oneOf": [
                {
                    "$ref": "#/domains/LoanApplication/types/ExistingApplication"
                },
                {
                    "type": "null"
                }
            ]
        },
        "ExistingApplication": {
            "type": "object",
            "description": "Existing loan application",
            "properties": {
                "id": {
                    "type": "string",
                    "description": "loan applicaton id.",
                    "example": "12345"
                },
                "token": {
                    "type": "string",
                    "description": "Loan application token.",
                    "example": "abcde"
                }
            },
            "additionalProperties": false,
            "required": [
                "id", "token"
            ]
        },
        "Applicant": {
            "type": "object",
            "description": "The person applying for the loan.",
            "pii": true,
            "properties": {
                "person": { "$ref": "#/domains/Generic/types/Person" },
                "addresses": {
                    "type": "array",
                    "description": "A list of addresses for the applicant.",
                    "pii": true,
                    "minItems": 1,
                    "maxItems": 9,
                    "items": { "$ref": "#/domains/LoanApplication/types/LoanAddress" }
                },
                "dateOfBirth": {
                    "type": "string",
                    "format": "date",
                    "description": "Date of birth YYYY-MM-DD.",
                    "example": "1980-01-01"
                },
                "relationshipStatus": {
                    "type": "string",
                    "description": "",
                    "enum": [
                        "single",
                        "married",
                        "divorced",
                        "cohabiting",
                        "widower"
                    ]
                },
                "nationality": {
                    "$ref": "#/domains/Generic/types/CountryCode",
                    "description": "Nationality according to passport."
                },
                "countryOfBirth": {
                    "$ref": "#/domains/Generic/types/CountryCode",
                    "description": "Country of birth."
                },
                "email": {
                    "type": "string",
                    "format": "email",
                    "example": "hello@example.com"
                },
                "phone": {
                    "$ref": "#/domains/Generic/types/Phone"
                },
                "dependentsCount": {
                    "type": "integer",
                    "minimum": 0
                },
                "residentialStatus": {
                }
            },
            "required": [
                "title",
                "firstName",
                "lastName",
                "dateOfBirth",
                "relationshipStatus",
                "nationality",
                "countryOfBirth"
            ],
            "additionalProperties": false
        },
        "Addresses": {
            "type": "array",
            "description": "A list of addresses for the applicant.",
            "pii": true,
            "minItems": 1,
            "maxItems": 9,
            "items": { "$ref": "#/domains/LoanApplication/types/LoanAddress" }
        },
        "LoanAddress": {
            "type": "object",
            "description": "Physical address information, typically used as part of billing or shipping address objects.",
            "pii": true,
            "properties": {
                "line1": {
                    "type": "string",
                    "description": "Street name with house number.",
                    "minLength": 1,
                    "example": "501 Twin Peaks Blv"
                },
                "line2": {
                    "type": "string",
                    "description": "Additional address information (e.g. flat).",
                    "example": "Flat 2"
                },
                "city": {
                    "type": "string",
                    "description": "Name of city, town or other settlement.",
                    "minLength": 1,
                    "example": "San Francisco"
                },
                "postcode": {
                    "type": "string",
                    "description": "Postcode in country-specific format, e.g. 5-digit number in US or <code>E3 3RP</code> in UK.",
                    "minLength": 1,
                    "example": "94581"
                },
                "countryCode": {
                    "$ref": "#/domains/Generic/types/CountryCode"
                },
                "countrySubdivision": {
                    "$ref": "#/domains/Generic/types/CountrySubdivision"
                },
                "dateMovedIn": {
                    "type": "string",
                    "format": "date",
                    "description": "Date at which the applicant moved into this address."
                },
                "status": {
                    "type": "string",
                    "description": "",
                    "enum": [
                        "own",
                        "family",
                        "rent"
                    ]
                },
                "mortgage": {
                    "$ref": "#/domains/LoanApplication/types/Mortgage"
                }
            },
            "required": [
                "line1",
                "line2",
                "city",
                "postcode",
                "countryCode",
                "countrySubdivision"
            ],
            "additionalProperties": false
        },
        "Mortgage": {
            "type": "object",
            "description": "Mortgage information for the associated address.",
            "pii": true,
            "properties": {
                "monthlyPayment": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "The amount paid per month by the loan applicant."
                },
                "jointMonthlyPayment": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "The amount paid per month for a joint mortgage."
                }
            },
            "required": [
                "monthlyPayment"
            ],
            "additionalProperties": false
        },
        "Employment": {
            "type": "object",
            "description": "Applicant employment details.",
            "pii": true,
            "properties": {
                "companyName": {
                    "type": "string",
                    "minLength": 1
                },
                "status": {
                    "type": "string",
                    "description": "",
                    "enum": [
                        "employed-fulltime",
                        "employed-parttime",
                        "unemployed",
                        "self-employed",
                        "on-benefits",
                        "retired"
                    ]
                },
                "jobTitle": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Job title.",
                    "example": "Computer programmer"
                },
                "grossIncome": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "Applicant's total annual gross salary (before tax)."
                },
                "netIncome": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "Applicant's total annual net salary (after tax)."
                },
                "payFrequency": {
                    "type": "string",
                    "enum": [
                        "monthly",
                        "weekly"
                    ]
                }
            },
            "required": [
                "status"
            ],
            "additionalProperties": false
        },
        "DirectDebitPayment": {
            "type": "object",
            "description": "Account details for direct debit.",
            "pii": true,
            "properties": {
                "sortCode": {
                    "type": "string",
                    "description": "Bank sort code",
                    "pattern": "\\d{2}-?\\d{2}-?\\d{2}",
                    "example": "56-00-29"
                },
                "accountNumber": {
                    "type": "string",
                    "minLength": 8,
                    "maxLength": 8,
                    "description": "Cover marketing name as provided by the insurer.",
                    "example": "26207729"
                },
                "accountHolder": { "$ref": "#/domains/Generic/types/Person" },
                "accountHolderAddress": { "$ref": "#/domains/Generic/types/Address" },
                "selectedPaymentDay": {
                    "type": "string",
                    "description": "Preferred payment day, one of availableDirectDebitPaymentDays.",
                    "example": "10"
                }
            },
            "required": [
                "sortCode",
                "accountNumber"
            ],
            "additionalProperties": false
        },
        "MobilePinConfirmation": {
            "type": "object",
            "description": "Mobile pin confirmation to confirm the applicant's mobile number.",
            "pii": true,
            "properties": {
                "code": {
                    "type": "string",
                    "description": "pin confirmation code.",
                    "example": "1234",
                    "minLength": 3,
                    "maxLength": 10
                }
            },
            "required": [
                "code"
            ],
            "additionalProperties": false
        },
        "EmailVerification": {
            "type": "object",
            "description": "Confirmation that email verification is done.",
            "pii": true,
            "properties": {
                "code": {
                    "type": "string",
                    "description": "Confirmation code.",
                    "example": "1234",
                    "minLength": 3,
                    "maxLength": 100
                }
            },
            "required": [

            ],
            "additionalProperties": false
        },
        "Files": {
            "type": "array",
            "description": "A list of uploaded files.",
            "pii": true,
            "minItems": 1,
            "maxItems": 99,
            "items": { "$ref": "#/domains/Generic/types/File" }
        },
        "Requirements": {
            "type": "array",
            "description": "A list of requirements.",
            "minItems": 0,
            "maxItems": 99,
            "items": { "$ref": "#/domains/LoanApplication/types/Requirement" }
        },
        "Requirement": {
            "type": "object",
            "description": "A required input for proof - e.g. of income.",
            "properties": {
                "name": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Name of requirement.",
                    "example": "income"
                },
                "url": {
                    "type": "string"
                }
            },
            "required": [
                "name"
            ],
            "additionalProperties": false
        },
        "Quote": {
            "type": "object",
            "description": "Loan quote",
            "pii": true,
            "properties": {
                "amount": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "The loan amount required."
                },
                "monthlyPayment": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "The amount repayable per month."
                },
                "repaymentMonths": {
                    "type": "number",
                    "description": "The number of months to repay the loan.",
                    "example": 48
                },
                "apr": {
                    "type": "number",
                    "description": "The APR of the loan.",
                    "example": 0.5
                },
                "fee": {
                    "$ref": "#/domains/Generic/types/Price",
                    "description": "Additional loan fee (if applicable)."
                }
            },
            "additionalProperties": false,
            "required": [
                "amount", "repaymentMonths", "apr"
            ]
        },
        "Documents": {
            "type": "array",
            "description": "A list of downloadable documents.",
            "pii": true,
            "minItems": 0,
            "maxItems": 99,
            "items": {
                "oneOf": [
                    {
                        "$ref": "#/domains/Generic/types/File"
                    },
                    {
                        "$ref": "#/domains/Generic/types/Link"
                    }
                ]
            }
        },
        "Confirmation": {
            "type": "object",
            "description": "Confirmation of the loan.",
            "pii": true,
            "properties": {
                "code": {
                    "type": "string",
                    "description": "Loan confirmation code",
                    "example": "1234"
                },
                "message": {
                    "type": "string",
                    "description": "Confirmation message from the web page.",
                    "example": "Your loan is confirmed."
                }
            },
            "required": [

            ],
            "additionalProperties": false
        },
        "Options": {
            "type": "object",
            "description": "Flags for enabling optional automation features.",
            "properties": {
            },
            "required": [
            ],
            "additionalProperties": false
        },
        "Expenses": {
            "type": "array",
            "description": "A list of available cover options found on the page.",
            "minItems": 1,
            "maxItems": 40,
            "items": { "$ref": "#/domains/LoanApplication/types/Expense" }
        },
        "Expense": {
            "type": "object",
            "properties": {
                "key": {
                    "type": "string",
                    "minLength": 1,
                    "example": "How much do you earn per month?"
                },
                "value": {
                    "type": "string",
                    "minLength": 1,
                    "example": "2000"
                }
            },
            "required": [
                "key",
                "value"
            ],
            "additionalProperties": false
        },
        "ExpenseTypes": {
            "type": "array",
            "description": "A list of available cover options found on the page.",
            "minItems": 1,
            "maxItems": 40,
            "items": { "$ref": "#/domains/LoanApplication/types/ExpenseType" }
        },
        "ExpenseType": {
            "type": "object",
            "properties": {
                "key": {
                    "type": "string",
                    "minLength": 1
                }
            },
            "required": [
                "key"
            ],
            "additionalProperties": false
        }
    },
    "errors": [
        {
            "code": "LoanApplicationDeclined",
            "category": "client",
            "description":"Loan application denied by lender."
        },
        {
            "code": "MobilePinVerificationFailed",
            "category": "client",
            "description":"Pin verification failed."
        }
    ]
}
